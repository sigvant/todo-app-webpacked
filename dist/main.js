(()=>{"use strict";const t={todoInput:document.querySelector(".todo-input"),todoDateInput:document.querySelector(".todo-date-input"),todoPriorityInput:document.querySelector(".priority-select"),todoButton:document.querySelector(".todo-button"),todoList:document.querySelector(".todo-list"),filterOption:document.querySelector(".filter-todo"),addTabButton:document.querySelector(".tab-button"),tabList:document.querySelector(".tab-list"),tab:document.querySelectorAll(".tab")};function e(t){this.name=t,this.todos=[]}function n(t,e,n,d){this.name=t,this.date=e,this.priority=n,this.status=d}let d;function o(){s();let e=document.querySelector(".tab-active").children[0].children[0].innerText;d.forEach((n=>{n.name==e&&n.todos.forEach((e=>{const n=document.createElement("div");n.classList.add("todo");let d=e.name,o=e.date,a=e.priority;const s=document.createElement("li");s.classList.add("todo-item");const i=document.createElement("div");i.textContent=d,i.classList.add("todo-info-boxes-name");const c=document.createElement("div");c.textContent=o,c.classList.add("todo-info-boxes-date");const l=document.createElement("div");l.textContent=a,l.classList.add("todo-info-boxes-priority"),s.appendChild(i),s.appendChild(c),s.appendChild(l),n.appendChild(s);const r=document.createElement("button");r.textContent="‚úîÔ∏è",r.classList.add("complete-btn"),n.appendChild(r);const u=document.createElement("button");u.textContent="üóëÔ∏è",u.classList.add("trash-btn"),n.appendChild(u),t.todoList.appendChild(n)}))}))}function a(){void 0!==t.tabList.childNodes[0]&&(t.tabList.childNodes[0].classList.add("tab-active"),o())}function s(){return d=null===localStorage.getItem("tabs")?[]:JSON.parse(localStorage.getItem("tabs")),d}t.todoButton.addEventListener("click",(function(e){e.preventDefault();const o=document.createElement("div");o.classList.add("todo");let a=t.todoInput.value,i=t.todoDateInput.value,c=t.todoPriorityInput.value,l=new n(a,i,c);const r=document.createElement("li");r.classList.add("todo-item");const u=document.createElement("div");u.textContent=a,u.classList.add("todo-info-boxes-name");const m=document.createElement("div");m.textContent=i,m.classList.add("todo-info-boxes-date");const p=document.createElement("div");p.textContent=c,p.classList.add("todo-info-boxes-priority"),r.appendChild(u),r.appendChild(m),r.appendChild(p),o.appendChild(r),function(t){s();const e=document.querySelector(".tab-active").childNodes[0].innerText;d.forEach((n=>{n.name==e&&(n.todos.push(t),localStorage.setItem("tabs",JSON.stringify(d)))}))}(l);const L=document.createElement("button");L.textContent="‚úîÔ∏è",L.classList.add("complete-btn"),o.appendChild(L);const h=document.createElement("button");h.textContent="üóëÔ∏è",h.classList.add("trash-btn"),o.appendChild(h),t.todoList.appendChild(o),t.todoInput.value="",t.todoDateInput.value=""})),t.todoList.addEventListener("click",(function(t){const e=t.target;if("trash-btn"===e.classList[0]){const t=e.parentElement;t.classList.add("fall"),function(t){const e=t.childNodes[0].childNodes[0].innerText;s(),d.forEach((t=>{t.todos=t.todos.filter((t=>t.name!=e))})),localStorage.setItem("tabs",JSON.stringify(d))}(t),t.addEventListener("transitionend",(()=>{t.remove()}))}"complete-btn"===e.classList[0]&&e.parentElement.classList.toggle("completed")})),t.filterOption.addEventListener("click",(function(e){t.todoList.childNodes.forEach((function(t){switch(e.target.value){case"all":t.style.display="flex";break;case"completed":t.classList.contains("completed")?t.style.display="flex":t.style.display="none";break;case"uncompleted":t.classList.contains("completed")?t.style.display="none":t.style.display="flex"}}))})),t.addTabButton.addEventListener("click",(function(n){n.preventDefault();let o=new e(prompt("Name your tab!","Popsicle")),i=document.createElement("li");i.classList.add("tab");let c=document.createElement("div");c.classList.add("tab-div");let l=document.createElement("div");l.classList.add("span-div");let r=document.createElement("span");r.textContent=o.name;let u=document.createElement("div");u.classList.add("trashcan-div");let m=document.createElement("button");m.classList.add("trash-btn-tab"),m.textContent="üóëÔ∏è",function(t){s(),d.push(t),localStorage.setItem("tabs",JSON.stringify(d))}(o),l.appendChild(r),c.appendChild(l),u.appendChild(m),i.appendChild(c),i.appendChild(u),t.tabList.appendChild(i),a()})),t.tabList.addEventListener("click",(function(t){const e=t.target;if("trash-btn-tab"===e.classList[0]||"trash-btn"===e.classList[0]){const t=e.parentElement.parentElement;if(1===t.parentElement.childNodes.length)return;t.classList.add("fall"),function(t){s();const e=t.children[0].innerText;d.splice(d.indexOf(e),1),localStorage.setItem("tabs",JSON.stringify(d))}(t),t.addEventListener("transitionend",(()=>{t.remove()}))}if("tab-div"===e.classList[0]||"tab"===e.classList[0]||"span-div"===e.classList[0]){let n=document.querySelectorAll(".tab");t.target.classList.contains("tab")&&(n.forEach((t=>t.classList.remove("tab-active"))),e.classList.add("tab-active"),document.querySelector(".todo-list").innerText="",o())}})),document.addEventListener("DOMContentLoaded",(function(){s(),d.forEach((function(e){let n=e.name,d=document.createElement("li");d.classList.add("tab");let o=document.createElement("div");o.classList.add("tab-div");let a=document.createElement("div");a.classList.add("span-div");let s=document.createElement("span");s.textContent=n;let i=document.createElement("div");i.classList.add("trashcan-div");let c=document.createElement("button");c.classList.add("trash-btn"),c.textContent="üóëÔ∏è",a.appendChild(s),o.appendChild(a),i.appendChild(c),d.appendChild(o),d.appendChild(i),t.tabList.appendChild(d)}))})),document.addEventListener("DOMContentLoaded",a),document.addEventListener("DOMContentLoaded",(function(){let t=new Date,e=t.getDate(),n=t.getMonth()+1;n<10&&(n=`0${n}`);let d=`${t.getFullYear()}-${n}-${e}`;document.querySelector(".todo-date-input").setAttribute("min",d)}))})();
//# sourceMappingURL=data:application/json;charset=utf-8;base64,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QUNJdEMsSUFDQUYsRUFBS00sU0FBUSxTQUFTaEIsR0FDbEIsSUFBSUcsRUFBT0gsRUFBSUcsS0FFWHVELEVBQVNuRSxTQUFTNEIsY0FBYyxNQUNwQ3VDLEVBQU90QyxVQUFVQyxJQUFJLE9BQ3JCLElBQUlzQyxFQUFTcEUsU0FBUzRCLGNBQWMsT0FDcEN3QyxFQUFPdkMsVUFBVUMsSUFBSSxXQUNyQixJQUFJdUMsRUFBYXJFLFNBQVM0QixjQUFjLE9BQ3hDeUMsRUFBV3hDLFVBQVVDLElBQUksWUFDekIsSUFBSXdDLEVBQVV0RSxTQUFTNEIsY0FBYyxRQUNyQzBDLEVBQVFyQyxZQUFjckIsRUFFdEIsSUFBSTJELEVBQWlCdkUsU0FBUzRCLGNBQWMsT0FDNUMyQyxFQUFlMUMsVUFBVUMsSUFBSSxnQkFDN0IsSUFBSTBDLEVBQWlCeEUsU0FBUzRCLGNBQWMsVUFDNUM0QyxFQUFlM0MsVUFBVUMsSUFBSSxhQUM3QjBDLEVBQWV2QyxZQUFjLE1BRTdCb0MsRUFBV2pDLFlBQVlrQyxHQUN2QkYsRUFBT2hDLFlBQVlpQyxHQUNuQkUsRUFBZW5DLFlBQVlvQyxHQUMzQkwsRUFBTy9CLFlBQVlnQyxHQUNuQkQsRUFBTy9CLFlBQVltQyxHQUNuQixzQkFBOEJKLFNDbFR0Q25FLFNBQVMyRCxpQkFBaUIsbUJBQW9CLEdBQzlDM0QsU0FBUzJELGlCQUFpQixvQkRnVjFCLFdBQ0ksSUFBSW9CLEVBQVEsSUFBSUMsS0FDWkMsRUFBTUYsRUFBTUcsVUFDWkMsRUFBUUosRUFBTUssV0FBYSxFQUM1QkQsRUFBUSxLQUNQQSxFQUFRLElBQUlBLEtBRWhCLElBQ0lFLEVBQVksR0FETE4sRUFBTU8saUJBQ1dILEtBQVNGLElBRXJCakYsU0FBU0MsY0FBYyxvQkFDN0JzRixhQUFhLE1BQU9GLE8iLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly90b2RvLWFwcC13ZWJwYWNrZWQvLi9zcmMvc2VsZWN0b3JzLmpzIiwid2VicGFjazovL3RvZG8tYXBwLXdlYnBhY2tlZC8uL3NyYy9jb25zdHJ1Y3RvcnMuanMiLCJ3ZWJwYWNrOi8vdG9kby1hcHAtd2VicGFja2VkLy4vc3JjL3RvZG9fZnVuY3Rpb25zLmpzIiwid2VicGFjazovL3RvZG8tYXBwLXdlYnBhY2tlZC8uL3NyYy9pbmRleC5qcyJdLCJzb3VyY2VzQ29udGVudCI6WyJjb25zdCBzZWxlY3RvcnMgPSAoKCkgPT4ge1xyXG4gICAgY29uc3QgdG9kb0lucHV0ID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLnRvZG8taW5wdXQnKTtcclxuICAgIGNvbnN0IHRvZG9EYXRlSW5wdXQgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcudG9kby1kYXRlLWlucHV0Jyk7XHJcbiAgICBjb25zdCB0b2RvUHJpb3JpdHlJbnB1dCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5wcmlvcml0eS1zZWxlY3QnKVxyXG4gICAgY29uc3QgdG9kb0J1dHRvbiA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy50b2RvLWJ1dHRvbicpO1xyXG4gICAgY29uc3QgdG9kb0xpc3QgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcudG9kby1saXN0Jyk7XHJcbiAgICBjb25zdCBmaWx0ZXJPcHRpb24gPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcuZmlsdGVyLXRvZG8nKTtcclxuXHJcbiAgICAvL3NlbGVjdG9ycyB0YWIgYXJlYVxyXG4gICAgY29uc3QgYWRkVGFiQnV0dG9uID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLnRhYi1idXR0b24nKTtcclxuICAgIGNvbnN0IHRhYkxpc3QgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcudGFiLWxpc3QnKTtcclxuICAgIGNvbnN0IHRhYiA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoJy50YWInKTtcclxuICAgIHJldHVybiB7XHJcbiAgICAgICAgdG9kb0lucHV0LFxyXG4gICAgICAgIHRvZG9EYXRlSW5wdXQsXHJcbiAgICAgICAgdG9kb1ByaW9yaXR5SW5wdXQsXHJcbiAgICAgICAgdG9kb0J1dHRvbixcclxuICAgICAgICB0b2RvTGlzdCxcclxuICAgICAgICBmaWx0ZXJPcHRpb24sXHJcbiAgICAgICAgYWRkVGFiQnV0dG9uLFxyXG4gICAgICAgIHRhYkxpc3QsXHJcbiAgICAgICAgdGFiXHJcbiAgICB9O1xyXG59KSgpO1xyXG5cclxuZXhwb3J0IGRlZmF1bHQgc2VsZWN0b3JzOyIsImZ1bmN0aW9uIFRhYihuYW1lKSB7XHJcbiAgICB0aGlzLm5hbWUgPSBuYW1lO1xyXG4gICAgdGhpcy50b2RvcyA9IFtdO1xyXG59XHJcblxyXG5mdW5jdGlvbiBUb2RvKG5hbWUsIGRhdGUsIHByaW9yaXR5LCBzdGF0dXMpIHtcclxuICAgIHRoaXMubmFtZSA9IG5hbWVcclxuICAgIHRoaXMuZGF0ZSA9IGRhdGVcclxuICAgIHRoaXMucHJpb3JpdHkgPSBwcmlvcml0eVxyXG4gICAgdGhpcy5zdGF0dXMgPSBzdGF0dXM7XHJcbn1cclxuXHJcbmV4cG9ydCB7VGFiLCBUb2RvfSIsImltcG9ydCBzZWxlY3RvcnMgZnJvbSBcIi4vc2VsZWN0b3JzXCI7XHJcbmltcG9ydCB7IFRhYiwgVG9kbyB9IGZyb20gXCIuL2NvbnN0cnVjdG9yc1wiO1xyXG5sZXQgdGFicztcclxuXHJcbnNlbGVjdG9ycy50b2RvQnV0dG9uLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgYWRkVG9kbyk7XHJcbnNlbGVjdG9ycy50b2RvTGlzdC5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIGRlbGV0ZUNoZWNrKTtcclxuc2VsZWN0b3JzLmZpbHRlck9wdGlvbi5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIGZpbHRlclRvZG8pO1xyXG5zZWxlY3RvcnMuYWRkVGFiQnV0dG9uLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgY3JlYXRlVGFiKTtcclxuc2VsZWN0b3JzLnRhYkxpc3QuYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCBkZWxldGVTZWxlY3RUYWIpO1xyXG5cclxuZnVuY3Rpb24gYWRkVG9kbyhldmVudCkge1xyXG4gICAgLy9wcmV2ZW50IGZvcm0gZnJvbSBzdWJtaXR0aW5nXHJcbiAgICBldmVudC5wcmV2ZW50RGVmYXVsdCgpO1xyXG4gICAgLy8gdG9kbyBESVZcclxuICAgIGNvbnN0IHRvZG9EaXYgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdkaXYnKTtcclxuICAgIHRvZG9EaXYuY2xhc3NMaXN0LmFkZCgndG9kbycpO1xyXG4gICAgLy8gY3JlYXRlIExJXHJcblxyXG4gICAgLy8gdG9kbyBvYmplY3QgaW5zdGFudGlhdGlvblxyXG5cclxuICAgIGxldCBuYW1lID0gc2VsZWN0b3JzLnRvZG9JbnB1dC52YWx1ZTtcclxuICAgIGxldCBkYXRlID0gc2VsZWN0b3JzLnRvZG9EYXRlSW5wdXQudmFsdWU7XHJcbiAgICBsZXQgcHJpb3JpdHkgPSBzZWxlY3RvcnMudG9kb1ByaW9yaXR5SW5wdXQudmFsdWU7XHJcbiAgICBsZXQgbmV3dG9kb29iaiA9IG5ldyBUb2RvKG5hbWUsIGRhdGUsIHByaW9yaXR5KTtcclxuXHJcblxyXG4gICAgY29uc3QgbmV3VG9kbyA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2xpJyk7XHJcbiAgICBuZXdUb2RvLmNsYXNzTGlzdC5hZGQoJ3RvZG8taXRlbScpO1xyXG5cclxuICAgIGNvbnN0IG5ld1RvZG9OYW1lRGl2ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnZGl2Jyk7XHJcbiAgICBuZXdUb2RvTmFtZURpdi50ZXh0Q29udGVudCA9IG5hbWU7XHJcbiAgICBuZXdUb2RvTmFtZURpdi5jbGFzc0xpc3QuYWRkKCd0b2RvLWluZm8tYm94ZXMtbmFtZScpXHJcblxyXG4gICAgY29uc3QgbmV3VG9kb0RhdGVEaXYgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdkaXYnKTtcclxuICAgIG5ld1RvZG9EYXRlRGl2LnRleHRDb250ZW50ID0gZGF0ZTtcclxuICAgIG5ld1RvZG9EYXRlRGl2LmNsYXNzTGlzdC5hZGQoJ3RvZG8taW5mby1ib3hlcy1kYXRlJylcclxuXHJcbiAgICBjb25zdCBuZXdUb2RvUHJpb3JpdHlEaXYgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdkaXYnKTtcclxuICAgIG5ld1RvZG9Qcmlvcml0eURpdi50ZXh0Q29udGVudCA9IHByaW9yaXR5O1xyXG4gICAgbmV3VG9kb1ByaW9yaXR5RGl2LmNsYXNzTGlzdC5hZGQoJ3RvZG8taW5mby1ib3hlcy1wcmlvcml0eScpXHJcbiAgICBcclxuICAgIFxyXG4gICAgbmV3VG9kby5hcHBlbmRDaGlsZChuZXdUb2RvTmFtZURpdik7XHJcbiAgICBuZXdUb2RvLmFwcGVuZENoaWxkKG5ld1RvZG9EYXRlRGl2KTtcclxuICAgIG5ld1RvZG8uYXBwZW5kQ2hpbGQobmV3VG9kb1ByaW9yaXR5RGl2KTtcclxuXHJcbiAgICB0b2RvRGl2LmFwcGVuZENoaWxkKG5ld1RvZG8pO1xyXG5cclxuXHJcbiAgICAvLyBhZGQgdG9kbyB0byB0aGUgbG9jYWwgc3RvcmFnZVxyXG4gICAgLy8gc2F2ZUxvY2FsVG9kb3MobmV3dG9kb29iaik7XHJcbiAgICAvLyBDSEVDSyBNQVJLIGJ1dHRvblxyXG5cclxuICAgIC8vcHV0IHRvZG8gaW4gdGhlIGFjdGl2ZSB0YWJcclxuICAgIHNhdmVUb2Rvc2luVGFiKG5ld3RvZG9vYmopO1xyXG5cclxuICAgIGNvbnN0IGNvbXBsZXRlZEJ1dHRvbiA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2J1dHRvbicpO1xyXG4gICAgY29tcGxldGVkQnV0dG9uLnRleHRDb250ZW50ID0gJ+KclO+4jyc7XHJcbiAgICBjb21wbGV0ZWRCdXR0b24uY2xhc3NMaXN0LmFkZCgnY29tcGxldGUtYnRuJyk7XHJcbiAgICB0b2RvRGl2LmFwcGVuZENoaWxkKGNvbXBsZXRlZEJ1dHRvbik7XHJcbiAgICBcclxuICAgIC8vIHRyYXNoIE1BUksgYnV0dG9uXHJcblxyXG4gICAgY29uc3QgdHJhc2hCdXR0b24gPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdidXR0b24nKTtcclxuICAgIHRyYXNoQnV0dG9uLnRleHRDb250ZW50ID0gJ/Cfl5HvuI8nO1xyXG4gICAgdHJhc2hCdXR0b24uY2xhc3NMaXN0LmFkZCgndHJhc2gtYnRuJyk7XHJcbiAgICB0b2RvRGl2LmFwcGVuZENoaWxkKHRyYXNoQnV0dG9uKTtcclxuXHJcbiAgICAvLyBhcHBlbmQgdG8gbGlzdFxyXG4gICAgc2VsZWN0b3JzLnRvZG9MaXN0LmFwcGVuZENoaWxkKHRvZG9EaXYpO1xyXG4gICAgLy8gY2xlYXIgdG9kbyBpbnB1dCB2YWx1ZVxyXG4gICAgc2VsZWN0b3JzLnRvZG9JbnB1dC52YWx1ZSA9ICcnO1xyXG4gICAgc2VsZWN0b3JzLnRvZG9EYXRlSW5wdXQudmFsdWUgPSAnJztcclxufVxyXG5cclxuZnVuY3Rpb24gc2F2ZVRvZG9zaW5UYWIodG9kbykge1xyXG4gICAgcmV0cmlldmVUYWJzRnJvbU1lbW9yeSgpOyBcclxuICAgIGNvbnN0IGFjdGl2ZVRhYiA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy50YWItYWN0aXZlJyk7XHJcbiAgICBjb25zdCB0YWJOYW1lID0gYWN0aXZlVGFiLmNoaWxkTm9kZXNbMF0uaW5uZXJUZXh0O1xyXG4gICAgdGFicy5mb3JFYWNoKHRhYiA9PiB7XHJcbiAgICAgICAgaWYodGFiLm5hbWUgPT0gdGFiTmFtZSkge1xyXG4gICAgICAgICAgICB0YWIudG9kb3MucHVzaCh0b2RvKTtcclxuICAgICAgICAgICAgbG9jYWxTdG9yYWdlLnNldEl0ZW0oJ3RhYnMnLCBKU09OLnN0cmluZ2lmeSh0YWJzKSk7XHJcbiAgICAgICAgfVxyXG4gICAgfSlcclxufVxyXG5cclxuZnVuY3Rpb24gZGVsZXRlQ2hlY2soZXZlbnQpIHtcclxuICAgIGNvbnN0IGl0ZW0gPSBldmVudC50YXJnZXQ7XHJcbiAgICBcclxuICAgIC8vIGRlbGV0ZSB0b2RvXHJcbiAgICBpZihpdGVtLmNsYXNzTGlzdFswXSA9PT0gJ3RyYXNoLWJ0bicpIHtcclxuICAgICAgICBjb25zdCB0b2RvID0gaXRlbS5wYXJlbnRFbGVtZW50O1xyXG4gICAgICAgIC8vIGFuaW1hdGlvblxyXG4gICAgICAgIHRvZG8uY2xhc3NMaXN0LmFkZCgnZmFsbCcpO1xyXG4gICAgICAgIHJlbW92ZUxvY2FsVG9kb3ModG9kbyk7XHJcbiAgICAgICAgdG9kby5hZGRFdmVudExpc3RlbmVyKCd0cmFuc2l0aW9uZW5kJywgKCkgPT4ge1xyXG4gICAgICAgICAgICB0b2RvLnJlbW92ZSgpO1xyXG4gICAgICAgIH0pO1xyXG4gICAgfVxyXG5cclxuICAgIC8vIGNoZWNrIG1hcmtcclxuXHJcbiAgICBpZihpdGVtLmNsYXNzTGlzdFswXSA9PT0gJ2NvbXBsZXRlLWJ0bicpIHtcclxuICAgICAgICBjb25zdCB0b2RvID0gaXRlbS5wYXJlbnRFbGVtZW50O1xyXG4gICAgICAgIHRvZG8uY2xhc3NMaXN0LnRvZ2dsZSgnY29tcGxldGVkJyk7XHJcbiAgICB9XHJcbn1cclxuXHJcbmZ1bmN0aW9uIGZpbHRlclRvZG8oZXZlbnQpIHtcclxuICAgIGNvbnN0IHRvZG9zID0gc2VsZWN0b3JzLnRvZG9MaXN0LmNoaWxkTm9kZXM7XHJcbiAgICB0b2Rvcy5mb3JFYWNoKGZ1bmN0aW9uKHRvZG8pIHtcclxuICAgICAgICBzd2l0Y2goZXZlbnQudGFyZ2V0LnZhbHVlKSB7XHJcbiAgICAgICAgICAgIGNhc2UgJ2FsbCc6XHJcbiAgICAgICAgICAgICAgICB0b2RvLnN0eWxlLmRpc3BsYXkgPSAnZmxleCc7XHJcbiAgICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgICAgY2FzZSAnY29tcGxldGVkJzpcclxuICAgICAgICAgICAgICAgIGlmKHRvZG8uY2xhc3NMaXN0LmNvbnRhaW5zKCdjb21wbGV0ZWQnKSkge1xyXG4gICAgICAgICAgICAgICAgICAgIHRvZG8uc3R5bGUuZGlzcGxheSA9ICdmbGV4JztcclxuICAgICAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICAgICAgdG9kby5zdHlsZS5kaXNwbGF5ID0gJ25vbmUnO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgICAgIGNhc2UgJ3VuY29tcGxldGVkJzpcclxuICAgICAgICAgICAgICAgIGlmKCF0b2RvLmNsYXNzTGlzdC5jb250YWlucygnY29tcGxldGVkJykpe1xyXG4gICAgICAgICAgICAgICAgICAgIHRvZG8uc3R5bGUuZGlzcGxheSA9ICdmbGV4JztcclxuICAgICAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICAgICAgdG9kby5zdHlsZS5kaXNwbGF5ID0gJ25vbmUnO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgfVxyXG4gICAgfSk7XHJcbn1cclxuXHJcbmZ1bmN0aW9uIGdldFRvZG9zKCkge1xyXG4gICAgcmV0cmlldmVUYWJzRnJvbU1lbW9yeSgpO1xyXG4gICAgXHJcbiAgICBsZXQgdGFiTmFtZSA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy50YWItYWN0aXZlJykuY2hpbGRyZW5bMF0uY2hpbGRyZW5bMF0uaW5uZXJUZXh0O1xyXG4gICAgXHJcbiAgICB0YWJzLmZvckVhY2godGFiID0+IHtcclxuICAgICAgICBpZih0YWIubmFtZSA9PSB0YWJOYW1lKSB7XHJcbiAgICAgICAgICAgIHRhYi50b2Rvcy5mb3JFYWNoKHRvZG8gPT4ge1xyXG4gICAgICAgICAgICAgICAgLy8gdG9kbyBESVZcclxuICAgICAgICAgICAgICAgIGNvbnN0IHRvZG9EaXYgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdkaXYnKTtcclxuICAgICAgICAgICAgICAgIHRvZG9EaXYuY2xhc3NMaXN0LmFkZCgndG9kbycpO1xyXG4gICAgICAgICAgICAgICAgLy8gY3JlYXRlIExJXHJcbiAgICAgICAgXHJcbiAgICAgICAgICAgICAgICAvLyB0b2RvIG9iamVjdCBpbnN0YW50aWF0aW9uXHJcbiAgICAgICAgXHJcbiAgICAgICAgICAgICAgICBsZXQgbmFtZSA9IHRvZG8ubmFtZTtcclxuICAgICAgICAgICAgICAgIGxldCBkYXRlID0gdG9kby5kYXRlO1xyXG4gICAgICAgICAgICAgICAgbGV0IHByaW9yaXR5ID0gdG9kby5wcmlvcml0eTsgICAgICAgIFxyXG4gICAgICAgIFxyXG4gICAgICAgICAgICAgICAgY29uc3QgbmV3VG9kbyA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2xpJyk7XHJcbiAgICAgICAgICAgICAgICBuZXdUb2RvLmNsYXNzTGlzdC5hZGQoJ3RvZG8taXRlbScpO1xyXG4gICAgICAgIFxyXG4gICAgICAgICAgICAgICAgY29uc3QgbmV3VG9kb05hbWVEaXYgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdkaXYnKTtcclxuICAgICAgICAgICAgICAgIG5ld1RvZG9OYW1lRGl2LnRleHRDb250ZW50ID0gbmFtZTtcclxuICAgICAgICAgICAgICAgIG5ld1RvZG9OYW1lRGl2LmNsYXNzTGlzdC5hZGQoJ3RvZG8taW5mby1ib3hlcy1uYW1lJylcclxuICAgICAgICBcclxuICAgICAgICAgICAgICAgIGNvbnN0IG5ld1RvZG9EYXRlRGl2ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnZGl2Jyk7XHJcbiAgICAgICAgICAgICAgICBuZXdUb2RvRGF0ZURpdi50ZXh0Q29udGVudCA9IGRhdGU7XHJcbiAgICAgICAgICAgICAgICBuZXdUb2RvRGF0ZURpdi5jbGFzc0xpc3QuYWRkKCd0b2RvLWluZm8tYm94ZXMtZGF0ZScpXHJcbiAgICAgICAgXHJcbiAgICAgICAgICAgICAgICBjb25zdCBuZXdUb2RvUHJpb3JpdHlEaXYgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdkaXYnKTtcclxuICAgICAgICAgICAgICAgIG5ld1RvZG9Qcmlvcml0eURpdi50ZXh0Q29udGVudCA9IHByaW9yaXR5O1xyXG4gICAgICAgICAgICAgICAgbmV3VG9kb1ByaW9yaXR5RGl2LmNsYXNzTGlzdC5hZGQoJ3RvZG8taW5mby1ib3hlcy1wcmlvcml0eScpXHJcbiAgICAgICAgICAgICAgICBcclxuICAgICAgICAgICAgICAgIFxyXG4gICAgICAgICAgICAgICAgbmV3VG9kby5hcHBlbmRDaGlsZChuZXdUb2RvTmFtZURpdik7XHJcbiAgICAgICAgICAgICAgICBuZXdUb2RvLmFwcGVuZENoaWxkKG5ld1RvZG9EYXRlRGl2KTtcclxuICAgICAgICAgICAgICAgIG5ld1RvZG8uYXBwZW5kQ2hpbGQobmV3VG9kb1ByaW9yaXR5RGl2KTtcclxuICAgICAgICBcclxuICAgICAgICAgICAgICAgIHRvZG9EaXYuYXBwZW5kQ2hpbGQobmV3VG9kbyk7XHJcbiAgICAgICAgXHJcbiAgICAgICAgICAgICAgICBjb25zdCBjb21wbGV0ZWRCdXR0b24gPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdidXR0b24nKTtcclxuICAgICAgICAgICAgICAgIGNvbXBsZXRlZEJ1dHRvbi50ZXh0Q29udGVudCA9ICfinJTvuI8nO1xyXG4gICAgICAgICAgICAgICAgY29tcGxldGVkQnV0dG9uLmNsYXNzTGlzdC5hZGQoJ2NvbXBsZXRlLWJ0bicpO1xyXG4gICAgICAgICAgICAgICAgdG9kb0Rpdi5hcHBlbmRDaGlsZChjb21wbGV0ZWRCdXR0b24pO1xyXG4gICAgICAgICAgICAgICAgXHJcbiAgICAgICAgICAgICAgICAvLyB0cmFzaCBNQVJLIGJ1dHRvblxyXG4gICAgICAgIFxyXG4gICAgICAgICAgICAgICAgY29uc3QgdHJhc2hCdXR0b24gPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdidXR0b24nKTtcclxuICAgICAgICAgICAgICAgIHRyYXNoQnV0dG9uLnRleHRDb250ZW50ID0gJ/Cfl5HvuI8nO1xyXG4gICAgICAgICAgICAgICAgdHJhc2hCdXR0b24uY2xhc3NMaXN0LmFkZCgndHJhc2gtYnRuJyk7XHJcbiAgICAgICAgICAgICAgICB0b2RvRGl2LmFwcGVuZENoaWxkKHRyYXNoQnV0dG9uKTtcclxuICAgICAgICBcclxuICAgICAgICAgICAgICAgIC8vIGFwcGVuZCB0byBsaXN0XHJcbiAgICAgICAgICAgICAgICBzZWxlY3RvcnMudG9kb0xpc3QuYXBwZW5kQ2hpbGQodG9kb0Rpdik7XHJcbiAgICAgICAgICAgIH0pXHJcbiAgICAgICAgfVxyXG4gICAgfSlcclxufVxyXG5cclxuZnVuY3Rpb24gcmVtb3ZlTG9jYWxUb2Rvcyh0b2RvKSB7XHJcbiAgICBjb25zdCB0b2RvRm9yVGFiID0gdG9kby5jaGlsZE5vZGVzWzBdLmNoaWxkTm9kZXNbMF0uaW5uZXJUZXh0O1xyXG4gICAgcmV0cmlldmVUYWJzRnJvbU1lbW9yeSgpO1xyXG4gICAgdGFicy5mb3JFYWNoKGl0ZW0gPT4ge1xyXG4gICAgICAgIGl0ZW0udG9kb3MgPSBpdGVtLnRvZG9zLmZpbHRlcihpdGVtID0+IGl0ZW0ubmFtZSAhPSB0b2RvRm9yVGFiKTtcclxuICAgIH0pXHJcbiAgICBsb2NhbFN0b3JhZ2Uuc2V0SXRlbSgndGFicycsIEpTT04uc3RyaW5naWZ5KHRhYnMpKTtcclxuXHJcblxyXG59XHJcblxyXG5mdW5jdGlvbiBjbGVhclRvZG9zKCkge1xyXG4gICAgZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLnRvZG8tbGlzdCcpLmlubmVyVGV4dCA9ICcnO1xyXG59XHJcblxyXG5mdW5jdGlvbiBjcmVhdGVUYWIoZXZlbnQpIHtcclxuICAgIGV2ZW50LnByZXZlbnREZWZhdWx0KCk7ICAgXHJcbiAgICBcclxuICAgIGxldCBuYW1lID0gcHJvbXB0KCdOYW1lIHlvdXIgdGFiIScsICdQb3BzaWNsZScpO1xyXG4gICAgbGV0IHRhYiA9IG5ldyBUYWIobmFtZSk7XHJcblxyXG4gICAgbGV0IG5ld1RhYiA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2xpJyk7XHJcbiAgICBuZXdUYWIuY2xhc3NMaXN0LmFkZCgndGFiJyk7XHJcbiAgICBsZXQgbmV3RGl2ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnZGl2Jyk7XHJcbiAgICBuZXdEaXYuY2xhc3NMaXN0LmFkZCgndGFiLWRpdicpO1xyXG4gICAgbGV0IG5ld1NwYW5EaXYgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdkaXYnKTtcclxuICAgIG5ld1NwYW5EaXYuY2xhc3NMaXN0LmFkZCgnc3Bhbi1kaXYnKTtcclxuICAgIGxldCBuZXdTcGFuID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnc3BhbicpO1xyXG4gICAgbmV3U3Bhbi50ZXh0Q29udGVudCA9IHRhYi5uYW1lO1xyXG5cclxuICAgIGxldCBuZXdUcmFzaGNhbkRpdiA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2RpdicpO1xyXG4gICAgbmV3VHJhc2hjYW5EaXYuY2xhc3NMaXN0LmFkZCgndHJhc2hjYW4tZGl2JylcclxuICAgIGxldCBuZXdUcmFzaEJ1dHRvbiA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2J1dHRvbicpO1xyXG4gICAgbmV3VHJhc2hCdXR0b24uY2xhc3NMaXN0LmFkZCgndHJhc2gtYnRuLXRhYicpO1xyXG4gICAgbmV3VHJhc2hCdXR0b24udGV4dENvbnRlbnQgPSAn8J+Xke+4jyc7XHJcblxyXG4gICAgLy9zYXZlIHRhYiB0byBsb2NhbCBtZW1vcnlcclxuICAgIHNhdmVMb2NhbFRhYih0YWIpO1xyXG4gICAgXHJcbiAgICBuZXdTcGFuRGl2LmFwcGVuZENoaWxkKG5ld1NwYW4pO1xyXG4gICAgbmV3RGl2LmFwcGVuZENoaWxkKG5ld1NwYW5EaXYpO1xyXG4gICAgbmV3VHJhc2hjYW5EaXYuYXBwZW5kQ2hpbGQobmV3VHJhc2hCdXR0b24pO1xyXG4gICAgbmV3VGFiLmFwcGVuZENoaWxkKG5ld0Rpdik7XHJcbiAgICBuZXdUYWIuYXBwZW5kQ2hpbGQobmV3VHJhc2hjYW5EaXYpO1xyXG4gICAgc2VsZWN0b3JzLnRhYkxpc3QuYXBwZW5kQ2hpbGQobmV3VGFiKTsgICBcclxuICAgIFxyXG4gICAgYWN0aXZhdGVUYWIoKTtcclxuXHJcbn1cclxuXHJcbmZ1bmN0aW9uIGRlbGV0ZVNlbGVjdFRhYihldmVudCkgeyBcclxuICAgIFxyXG4gICAgY29uc3QgaXRlbSA9IGV2ZW50LnRhcmdldDtcclxuICAgIFxyXG4gICAgXHJcbiAgICAvLyBkZWxldGUgdG9kb1xyXG4gICAgaWYoaXRlbS5jbGFzc0xpc3RbMF0gPT09ICd0cmFzaC1idG4tdGFiJyB8fCBpdGVtLmNsYXNzTGlzdFswXSA9PT0gJ3RyYXNoLWJ0bicgKSB7XHJcbiAgICAgICAgY29uc3QgdGFiID0gaXRlbS5wYXJlbnRFbGVtZW50LnBhcmVudEVsZW1lbnQ7XHJcbiAgICAgICAgLy8gZG9lcyBub3QgYWxsb3cgZGVsZXRpb24gd2hlbiBvbmx5IG9uZSB0YWJcclxuICAgICAgICBpZih0YWIucGFyZW50RWxlbWVudC5jaGlsZE5vZGVzLmxlbmd0aCA9PT0gMSkgcmV0dXJuO1xyXG4gICAgICAgIC8vIGFuaW1hdGlvblxyXG4gICAgICAgIHRhYi5jbGFzc0xpc3QuYWRkKCdmYWxsJyk7XHJcbiAgICAgICAgcmVtb3ZlTG9jYWxUYWIodGFiKTtcclxuICAgICAgICB0YWIuYWRkRXZlbnRMaXN0ZW5lcigndHJhbnNpdGlvbmVuZCcsICgpID0+IHtcclxuICAgICAgICAgICAgdGFiLnJlbW92ZSgpO1xyXG4gICAgICAgIH0pO1xyXG4gICAgfVxyXG5cclxuICAgIC8vIGNoZWNrIG1hcmtcclxuXHJcbiAgICBpZihpdGVtLmNsYXNzTGlzdFswXSA9PT0gJ3RhYi1kaXYnIHx8IGl0ZW0uY2xhc3NMaXN0WzBdID09PSAndGFiJyB8fCBpdGVtLmNsYXNzTGlzdFswXSA9PT0gJ3NwYW4tZGl2Jykge1xyXG4gICAgICAgIGxldCB0YWIgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKCcudGFiJyk7XHJcbiAgICAgICAgaWYoZXZlbnQudGFyZ2V0LmNsYXNzTGlzdC5jb250YWlucygndGFiJykpIHtcclxuICAgICAgICAgICAgdGFiLmZvckVhY2goaXRlbSA9PiBpdGVtLmNsYXNzTGlzdC5yZW1vdmUoJ3RhYi1hY3RpdmUnKSk7XHJcbiAgICAgICAgICAgIGl0ZW0uY2xhc3NMaXN0LmFkZCgndGFiLWFjdGl2ZScpO1xyXG4gICAgICAgICAgICBjbGVhclRvZG9zKCk7XHJcbiAgICAgICAgICAgIGdldFRvZG9zKCk7XHJcbiAgICAgICAgICAgIFxyXG4gICAgICAgIH1cclxuICAgICAgICBcclxuICAgIH1cclxufVxyXG5cclxuZnVuY3Rpb24gc2F2ZUxvY2FsVGFiKHRhYikge1xyXG4gICAgLy9jaGVjayAtLSBkbyBJIGFscmVhZHkgaGF2ZSB0aGluZ3MgaW4gdGhlcmU/XHJcbiAgICByZXRyaWV2ZVRhYnNGcm9tTWVtb3J5KCk7XHJcbiAgICB0YWJzLnB1c2godGFiKTtcclxuICAgIGxvY2FsU3RvcmFnZS5zZXRJdGVtKCd0YWJzJywgSlNPTi5zdHJpbmdpZnkodGFicykpOyAgIFxyXG59XHJcblxyXG5mdW5jdGlvbiBsb2FkVGFicygpIHtcclxuICAgIHJldHJpZXZlVGFic0Zyb21NZW1vcnkoKTtcclxuICAgIHRhYnMuZm9yRWFjaChmdW5jdGlvbih0YWIpe1xyXG4gICAgICAgIGxldCBuYW1lID0gdGFiLm5hbWU7XHJcbiAgICAgICAgXHJcbiAgICAgICAgbGV0IG5ld1RhYiA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2xpJyk7XHJcbiAgICAgICAgbmV3VGFiLmNsYXNzTGlzdC5hZGQoJ3RhYicpO1xyXG4gICAgICAgIGxldCBuZXdEaXYgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdkaXYnKTtcclxuICAgICAgICBuZXdEaXYuY2xhc3NMaXN0LmFkZCgndGFiLWRpdicpO1xyXG4gICAgICAgIGxldCBuZXdTcGFuRGl2ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnZGl2Jyk7XHJcbiAgICAgICAgbmV3U3BhbkRpdi5jbGFzc0xpc3QuYWRkKCdzcGFuLWRpdicpO1xyXG4gICAgICAgIGxldCBuZXdTcGFuID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnc3BhbicpO1xyXG4gICAgICAgIG5ld1NwYW4udGV4dENvbnRlbnQgPSBuYW1lO1xyXG4gICAgXHJcbiAgICAgICAgbGV0IG5ld1RyYXNoY2FuRGl2ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnZGl2Jyk7XHJcbiAgICAgICAgbmV3VHJhc2hjYW5EaXYuY2xhc3NMaXN0LmFkZCgndHJhc2hjYW4tZGl2JylcclxuICAgICAgICBsZXQgbmV3VHJhc2hCdXR0b24gPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdidXR0b24nKTtcclxuICAgICAgICBuZXdUcmFzaEJ1dHRvbi5jbGFzc0xpc3QuYWRkKCd0cmFzaC1idG4nKTtcclxuICAgICAgICBuZXdUcmFzaEJ1dHRvbi50ZXh0Q29udGVudCA9ICfwn5eR77iPJztcclxuICAgICAgICBcclxuICAgICAgICBuZXdTcGFuRGl2LmFwcGVuZENoaWxkKG5ld1NwYW4pO1xyXG4gICAgICAgIG5ld0Rpdi5hcHBlbmRDaGlsZChuZXdTcGFuRGl2KTtcclxuICAgICAgICBuZXdUcmFzaGNhbkRpdi5hcHBlbmRDaGlsZChuZXdUcmFzaEJ1dHRvbik7XHJcbiAgICAgICAgbmV3VGFiLmFwcGVuZENoaWxkKG5ld0Rpdik7XHJcbiAgICAgICAgbmV3VGFiLmFwcGVuZENoaWxkKG5ld1RyYXNoY2FuRGl2KTtcclxuICAgICAgICBzZWxlY3RvcnMudGFiTGlzdC5hcHBlbmRDaGlsZChuZXdUYWIpOyAgIFxyXG4gICAgfSlcclxufVxyXG5cclxuZnVuY3Rpb24gcmVtb3ZlTG9jYWxUYWIodGFiKSB7XHJcbiAgICByZXRyaWV2ZVRhYnNGcm9tTWVtb3J5KCk7XHJcbiAgICAvLyB3aGF0IEkgY2xpY2sgaXMgdGhlIGRpdiwgbm93IEkgd2FudCB0aGUgbGkgYW5kIHRoZSBpbm5lciB0ZXh0XHJcbiAgICAvLyBzbyB3ZSBjYW4gU1BMSUNFIGl0XHJcbiAgICBjb25zdCB0YWJJbmRleCA9IHRhYi5jaGlsZHJlblswXS5pbm5lclRleHQ7XHJcbiAgICB0YWJzLnNwbGljZSh0YWJzLmluZGV4T2YodGFiSW5kZXgpLCAxKTtcclxuICAgIGxvY2FsU3RvcmFnZS5zZXRJdGVtKCd0YWJzJywgSlNPTi5zdHJpbmdpZnkodGFicykpO1xyXG5cclxufVxyXG5cclxuZnVuY3Rpb24gYWN0aXZhdGVUYWIoKSB7XHJcbiAgICBcclxuICAgIGlmKHNlbGVjdG9ycy50YWJMaXN0LmNoaWxkTm9kZXNbMF0gPT09IHVuZGVmaW5lZCkgcmV0dXJuO1xyXG4gICAgZWxzZSB7XHJcbiAgICAgICAgc2VsZWN0b3JzLnRhYkxpc3QuY2hpbGROb2Rlc1swXS5jbGFzc0xpc3QuYWRkKCd0YWItYWN0aXZlJyk7ICAgIFxyXG4gICAgICAgIGdldFRvZG9zKCk7XHJcbiAgICB9XHJcbn1cclxuXHJcbmZ1bmN0aW9uIHJldHJpZXZlVGFic0Zyb21NZW1vcnkoKSB7XHJcbiAgICBpZihsb2NhbFN0b3JhZ2UuZ2V0SXRlbSgndGFicycpID09PSBudWxsKSB0YWJzID0gW107XHJcbiAgICBlbHNlIHtcclxuICAgICAgICB0YWJzID0gSlNPTi5wYXJzZShsb2NhbFN0b3JhZ2UuZ2V0SXRlbSgndGFicycpKTtcclxuICAgIH1cclxuICAgIHJldHVybiB0YWJzO1xyXG59XHJcblxyXG5mdW5jdGlvbiBnZXRUb2RheURhdGUoKSB7XHJcbiAgICBsZXQgdG9kYXkgPSBuZXcgRGF0ZSgpO1xyXG4gICAgbGV0IGRheSA9IHRvZGF5LmdldERhdGUoKTtcclxuICAgIGxldCBtb250aCA9IHRvZGF5LmdldE1vbnRoKCkgKyAxO1xyXG4gICAgaWYobW9udGggPCAxMCkge1xyXG4gICAgICAgIG1vbnRoID0gYDAke21vbnRofWA7XHJcbiAgICB9ICAgICAgICBcclxuICAgIGxldCB5ZWFyID0gdG9kYXkuZ2V0RnVsbFllYXIoKTtcclxuICAgIGxldCB0b2RheURhdGUgPSAoYCR7eWVhcn0tJHttb250aH0tJHtkYXl9YCk7XHJcblxyXG4gICAgbGV0IGRhdGVJbnB1dCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy50b2RvLWRhdGUtaW5wdXQnKTtcclxuICAgIGRhdGVJbnB1dC5zZXRBdHRyaWJ1dGUoJ21pbicsIHRvZGF5RGF0ZSk7XHJcbn1cclxuXHJcbmV4cG9ydCB7YWRkVG9kbywgc2F2ZVRvZG9zaW5UYWIsIGRlbGV0ZUNoZWNrLCBmaWx0ZXJUb2RvLFxyXG4gICAgZ2V0VG9kb3MsIHJlbW92ZUxvY2FsVG9kb3MsIGNsZWFyVG9kb3MsIGNyZWF0ZVRhYiwgZGVsZXRlU2VsZWN0VGFiLFxyXG4gICAgc2F2ZUxvY2FsVGFiLCBsb2FkVGFicywgcmVtb3ZlTG9jYWxUYWIsIGFjdGl2YXRlVGFiLCBcclxuICAgIHJldHJpZXZlVGFic0Zyb21NZW1vcnksIGdldFRvZGF5RGF0ZX0iLCJpbXBvcnQgKiBhcyB0b2RvTG9naWMgZnJvbSAnLi90b2RvX2Z1bmN0aW9ucyc7XHJcblxyXG5kb2N1bWVudC5hZGRFdmVudExpc3RlbmVyKCdET01Db250ZW50TG9hZGVkJywgdG9kb0xvZ2ljLmxvYWRUYWJzKTtcclxuZG9jdW1lbnQuYWRkRXZlbnRMaXN0ZW5lcignRE9NQ29udGVudExvYWRlZCcsIHRvZG9Mb2dpYy5hY3RpdmF0ZVRhYik7XHJcbmRvY3VtZW50LmFkZEV2ZW50TGlzdGVuZXIoJ0RPTUNvbnRlbnRMb2FkZWQnLCB0b2RvTG9naWMuZ2V0VG9kYXlEYXRlKTtcclxuIl0sIm5hbWVzIjpbInRvZG9JbnB1dCIsImRvY3VtZW50IiwicXVlcnlTZWxlY3RvciIsInRvZG9EYXRlSW5wdXQiLCJ0b2RvUHJpb3JpdHlJbnB1dCIsInRvZG9CdXR0b24iLCJ0b2RvTGlzdCIsImZpbHRlck9wdGlvbiIsImFkZFRhYkJ1dHRvbiIsInRhYkxpc3QiLCJ0YWIiLCJxdWVyeVNlbGVjdG9yQWxsIiwiVGFiIiwibmFtZSIsInRoaXMiLCJ0b2RvcyIsIlRvZG8iLCJkYXRlIiwicHJpb3JpdHkiLCJzdGF0dXMiLCJ0YWJzIiwiZ2V0VG9kb3MiLCJyZXRyaWV2ZVRhYnNGcm9tTWVtb3J5IiwidGFiTmFtZSIsImNoaWxkcmVuIiwiaW5uZXJUZXh0IiwiZm9yRWFjaCIsInRvZG8iLCJ0b2RvRGl2IiwiY3JlYXRlRWxlbWVudCIsImNsYXNzTGlzdCIsImFkZCIsIm5ld1RvZG8iLCJuZXdUb2RvTmFtZURpdiIsInRleHRDb250ZW50IiwibmV3VG9kb0RhdGVEaXYiLCJuZXdUb2RvUHJpb3JpdHlEaXYiLCJhcHBlbmRDaGlsZCIsImNvbXBsZXRlZEJ1dHRvbiIsInRyYXNoQnV0dG9uIiwiYWN0aXZhdGVUYWIiLCJ1bmRlZmluZWQiLCJsb2NhbFN0b3JhZ2UiLCJnZXRJdGVtIiwiSlNPTiIsInBhcnNlIiwiZXZlbnQiLCJwcmV2ZW50RGVmYXVsdCIsIm5ld3RvZG9vYmoiLCJjaGlsZE5vZGVzIiwicHVzaCIsInNldEl0ZW0iLCJzdHJpbmdpZnkiLCJzYXZlVG9kb3NpblRhYiIsIml0ZW0iLCJ0YXJnZXQiLCJwYXJlbnRFbGVtZW50IiwidG9kb0ZvclRhYiIsImZpbHRlciIsInJlbW92ZUxvY2FsVG9kb3MiLCJhZGRFdmVudExpc3RlbmVyIiwicmVtb3ZlIiwidG9nZ2xlIiwidmFsdWUiLCJzdHlsZSIsImRpc3BsYXkiLCJjb250YWlucyIsInByb21wdCIsIm5ld1RhYiIsIm5ld0RpdiIsIm5ld1NwYW5EaXYiLCJuZXdTcGFuIiwibmV3VHJhc2hjYW5EaXYiLCJuZXdUcmFzaEJ1dHRvbiIsInNhdmVMb2NhbFRhYiIsImxlbmd0aCIsInRhYkluZGV4Iiwic3BsaWNlIiwiaW5kZXhPZiIsInJlbW92ZUxvY2FsVGFiIiwidG9kYXkiLCJEYXRlIiwiZGF5IiwiZ2V0RGF0ZSIsIm1vbnRoIiwiZ2V0TW9udGgiLCJ0b2RheURhdGUiLCJnZXRGdWxsWWVhciIsInNldEF0dHJpYnV0ZSJdLCJzb3VyY2VSb290IjoiIn0=