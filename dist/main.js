(()=>{"use strict";const t={todoInput:document.querySelector(".todo-input"),todoDateInput:document.querySelector(".todo-date-input"),todoPriorityInput:document.querySelector(".priority-select"),todoButton:document.querySelector(".todo-button"),todoList:document.querySelector(".todo-list"),filterOption:document.querySelector(".filter-todo"),addTabButton:document.querySelector(".tab-button"),tabList:document.querySelector(".tab-list"),tab:document.querySelectorAll(".tab")};function e(t){this.name=t,this.todos=[]}function n(t,e,n,d){this.name=t,this.date=e,this.priority=n,this.status=d}let d;function o(){a();let e=document.querySelector(".tab-active").children[0].children[0].innerText;d.forEach((n=>{n.name==e&&n.todos.forEach((e=>{const n=document.createElement("div");n.classList.add("todo");let d=e.name,o=e.date,a=e.priority;const s=document.createElement("li");s.classList.add("todo-item");const i=document.createElement("div");i.textContent=d,i.classList.add("todo-info-boxes-name");const c=document.createElement("div");c.textContent=o,c.classList.add("todo-info-boxes-date");const l=document.createElement("div");l.textContent=a,l.classList.add("todo-info-boxes-priority"),s.appendChild(i),s.appendChild(c),s.appendChild(l),n.appendChild(s);const r=document.createElement("button");r.textContent="‚úîÔ∏è",r.classList.add("complete-btn"),n.appendChild(r);const u=document.createElement("button");u.textContent="üóëÔ∏è",u.classList.add("trash-btn"),n.appendChild(u),t.todoList.appendChild(n)}))}))}function a(){return d=null===localStorage.getItem("tabs")?[]:JSON.parse(localStorage.getItem("tabs")),d}t.todoButton.addEventListener("click",(function(e){e.preventDefault();const o=document.createElement("div");o.classList.add("todo");let s=t.todoInput.value,i=t.todoDateInput.value,c=t.todoPriorityInput.value,l=new n(s,i,c);const r=document.createElement("li");r.classList.add("todo-item");const u=document.createElement("div");u.textContent=s,u.classList.add("todo-info-boxes-name");const m=document.createElement("div");m.textContent=i,m.classList.add("todo-info-boxes-date");const p=document.createElement("div");p.textContent=c,p.classList.add("todo-info-boxes-priority"),r.appendChild(u),r.appendChild(m),r.appendChild(p),o.appendChild(r),function(t){a();const e=document.querySelector(".tab-active").childNodes[0].innerText;d.forEach((n=>{n.name==e&&(n.todos.push(t),localStorage.setItem("tabs",JSON.stringify(d)))}))}(l);const h=document.createElement("button");h.textContent="‚úîÔ∏è",h.classList.add("complete-btn"),o.appendChild(h);const L=document.createElement("button");L.textContent="üóëÔ∏è",L.classList.add("trash-btn"),o.appendChild(L),t.todoList.appendChild(o),t.todoInput.value="",t.todoDateInput.value=""})),t.todoList.addEventListener("click",(function(t){const e=t.target;if("trash-btn"===e.classList[0]){const t=e.parentElement;t.classList.add("fall"),function(t){const e=t.childNodes[0].childNodes[0].innerText;a(),d.forEach((t=>{t.todos=t.todos.filter((t=>t.name!=e))})),localStorage.setItem("tabs",JSON.stringify(d))}(t),t.addEventListener("transitionend",(()=>{t.remove()}))}"complete-btn"===e.classList[0]&&e.parentElement.classList.toggle("completed")})),t.filterOption.addEventListener("click",(function(e){t.todoList.childNodes.forEach((function(t){switch(e.target.value){case"all":t.style.display="flex";break;case"completed":t.classList.contains("completed")?t.style.display="flex":t.style.display="none";break;case"uncompleted":t.classList.contains("completed")?t.style.display="none":t.style.display="flex"}}))})),t.addTabButton.addEventListener("click",(function(n){n.preventDefault();let o=new e(prompt("Name your tab!","Popsicle")),s=document.createElement("li");s.classList.add("tab");let i=document.createElement("div");i.classList.add("tab-div");let c=document.createElement("div");c.classList.add("span-div");let l=document.createElement("span");l.textContent=o.name;let r=document.createElement("div");r.classList.add("trashcan-div");let u=document.createElement("button");u.classList.add("trash-btn-tab"),u.textContent="üóëÔ∏è",function(t){a(),d.push(t),localStorage.setItem("tabs",JSON.stringify(d))}(o),c.appendChild(l),i.appendChild(c),r.appendChild(u),s.appendChild(i),s.appendChild(r),t.tabList.appendChild(s);let m=document.querySelector(".tab");1!==m.parentElement.childNodes.length||m.classList.add("tab-active")})),t.tabList.addEventListener("click",(function(t){const e=t.target;if("trash-btn-tab"===e.classList[0]||"trash-btn"===e.classList[0]){const t=e.parentElement.parentElement;if(1===t.parentElement.childNodes.length)return;t.classList.add("fall"),function(t){a();const e=t.children[0].innerText;d.splice(d.indexOf(e),1),localStorage.setItem("tabs",JSON.stringify(d))}(t),t.addEventListener("transitionend",(()=>{t.remove()}))}if("tab-div"===e.classList[0]||"tab"===e.classList[0]||"span-div"===e.classList[0]){let n=document.querySelectorAll(".tab");t.target.classList.contains("tab")&&(n.forEach((t=>t.classList.remove("tab-active"))),e.classList.add("tab-active"),document.querySelector(".todo-list").innerText="",o())}})),document.addEventListener("DOMContentLoaded",(function(){a(),d.forEach((function(e){let n=e.name,d=document.createElement("li");d.classList.add("tab");let o=document.createElement("div");o.classList.add("tab-div");let a=document.createElement("div");a.classList.add("span-div");let s=document.createElement("span");s.textContent=n;let i=document.createElement("div");i.classList.add("trashcan-div");let c=document.createElement("button");c.classList.add("trash-btn-tab"),c.textContent="üóëÔ∏è",a.appendChild(s),o.appendChild(a),i.appendChild(c),d.appendChild(o),d.appendChild(i),t.tabList.appendChild(d)}))})),document.addEventListener("DOMContentLoaded",(function(){void 0!==t.tabList.childNodes[0]&&(t.tabList.childNodes[0].classList.add("tab-active"),o())})),document.addEventListener("DOMContentLoaded",(function(){let t=new Date,e=t.getDate(),n=t.getMonth()+1;n<10&&(n=`0${n}`);let d=`${t.getFullYear()}-${n}-${e}`;document.querySelector(".todo-date-input").setAttribute("min",d)}))})();
//# sourceMappingURL=data:application/json;charset=utf-8;base64,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b3JzLmpzIiwid2VicGFjazovL3RvZG8tYXBwLXdlYnBhY2tlZC8uL3NyYy9jb25zdHJ1Y3RvcnMuanMiLCJ3ZWJwYWNrOi8vdG9kby1hcHAtd2VicGFja2VkLy4vc3JjL3RvZG9fZnVuY3Rpb25zLmpzIiwid2VicGFjazovL3RvZG8tYXBwLXdlYnBhY2tlZC8uL3NyYy9pbmRleC5qcyJdLCJzb3VyY2VzQ29udGVudCI6WyJjb25zdCBzZWxlY3RvcnMgPSAoKCkgPT4ge1xyXG4gICAgY29uc3QgdG9kb0lucHV0ID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLnRvZG8taW5wdXQnKTtcclxuICAgIGNvbnN0IHRvZG9EYXRlSW5wdXQgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcudG9kby1kYXRlLWlucHV0Jyk7XHJcbiAgICBjb25zdCB0b2RvUHJpb3JpdHlJbnB1dCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5wcmlvcml0eS1zZWxlY3QnKVxyXG4gICAgY29uc3QgdG9kb0J1dHRvbiA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy50b2RvLWJ1dHRvbicpO1xyXG4gICAgY29uc3QgdG9kb0xpc3QgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcudG9kby1saXN0Jyk7XHJcbiAgICBjb25zdCBmaWx0ZXJPcHRpb24gPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcuZmlsdGVyLXRvZG8nKTtcclxuXHJcbiAgICAvL3NlbGVjdG9ycyB0YWIgYXJlYVxyXG4gICAgY29uc3QgYWRkVGFiQnV0dG9uID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLnRhYi1idXR0b24nKTtcclxuICAgIGNvbnN0IHRhYkxpc3QgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcudGFiLWxpc3QnKTtcclxuICAgIGNvbnN0IHRhYiA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoJy50YWInKTtcclxuICAgIHJldHVybiB7XHJcbiAgICAgICAgdG9kb0lucHV0LFxyXG4gICAgICAgIHRvZG9EYXRlSW5wdXQsXHJcbiAgICAgICAgdG9kb1ByaW9yaXR5SW5wdXQsXHJcbiAgICAgICAgdG9kb0J1dHRvbixcclxuICAgICAgICB0b2RvTGlzdCxcclxuICAgICAgICBmaWx0ZXJPcHRpb24sXHJcbiAgICAgICAgYWRkVGFiQnV0dG9uLFxyXG4gICAgICAgIHRhYkxpc3QsXHJcbiAgICAgICAgdGFiXHJcbiAgICB9O1xyXG59KSgpO1xyXG5cclxuZXhwb3J0IGRlZmF1bHQgc2VsZWN0b3JzOyIsImZ1bmN0aW9uIFRhYihuYW1lKSB7XHJcbiAgICB0aGlzLm5hbWUgPSBuYW1lO1xyXG4gICAgdGhpcy50b2RvcyA9IFtdO1xyXG59XHJcblxyXG5mdW5jdGlvbiBUb2RvKG5hbWUsIGRhdGUsIHByaW9yaXR5LCBzdGF0dXMpIHtcclxuICAgIHRoaXMubmFtZSA9IG5hbWVcclxuICAgIHRoaXMuZGF0ZSA9IGRhdGVcclxuICAgIHRoaXMucHJpb3JpdHkgPSBwcmlvcml0eVxyXG4gICAgdGhpcy5zdGF0dXMgPSBzdGF0dXM7XHJcbn1cclxuXHJcbmV4cG9ydCB7VGFiLCBUb2RvfSIsImltcG9ydCBzZWxlY3RvcnMgZnJvbSBcIi4vc2VsZWN0b3JzXCI7XHJcbmltcG9ydCB7IFRhYiwgVG9kbyB9IGZyb20gXCIuL2NvbnN0cnVjdG9yc1wiO1xyXG5sZXQgdGFicztcclxuXHJcbnNlbGVjdG9ycy50b2RvQnV0dG9uLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgYWRkVG9kbyk7XHJcbnNlbGVjdG9ycy50b2RvTGlzdC5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIGRlbGV0ZUNoZWNrKTtcclxuc2VsZWN0b3JzLmZpbHRlck9wdGlvbi5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIGZpbHRlclRvZG8pO1xyXG5zZWxlY3RvcnMuYWRkVGFiQnV0dG9uLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgY3JlYXRlVGFiKTtcclxuc2VsZWN0b3JzLnRhYkxpc3QuYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCBkZWxldGVTZWxlY3RUYWIpO1xyXG5cclxuZnVuY3Rpb24gYWRkVG9kbyhldmVudCkge1xyXG4gICAgLy9wcmV2ZW50IGZvcm0gZnJvbSBzdWJtaXR0aW5nXHJcbiAgICBldmVudC5wcmV2ZW50RGVmYXVsdCgpO1xyXG4gICAgLy8gdG9kbyBESVZcclxuICAgIGNvbnN0IHRvZG9EaXYgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdkaXYnKTtcclxuICAgIHRvZG9EaXYuY2xhc3NMaXN0LmFkZCgndG9kbycpO1xyXG4gICAgLy8gY3JlYXRlIExJXHJcblxyXG4gICAgLy8gdG9kbyBvYmplY3QgaW5zdGFudGlhdGlvblxyXG5cclxuICAgIGxldCBuYW1lID0gc2VsZWN0b3JzLnRvZG9JbnB1dC52YWx1ZTtcclxuICAgIGxldCBkYXRlID0gc2VsZWN0b3JzLnRvZG9EYXRlSW5wdXQudmFsdWU7XHJcbiAgICBsZXQgcHJpb3JpdHkgPSBzZWxlY3RvcnMudG9kb1ByaW9yaXR5SW5wdXQudmFsdWU7XHJcbiAgICBsZXQgbmV3dG9kb29iaiA9IG5ldyBUb2RvKG5hbWUsIGRhdGUsIHByaW9yaXR5KTtcclxuXHJcblxyXG4gICAgY29uc3QgbmV3VG9kbyA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2xpJyk7XHJcbiAgICBuZXdUb2RvLmNsYXNzTGlzdC5hZGQoJ3RvZG8taXRlbScpO1xyXG5cclxuICAgIGNvbnN0IG5ld1RvZG9OYW1lRGl2ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnZGl2Jyk7XHJcbiAgICBuZXdUb2RvTmFtZURpdi50ZXh0Q29udGVudCA9IG5hbWU7XHJcbiAgICBuZXdUb2RvTmFtZURpdi5jbGFzc0xpc3QuYWRkKCd0b2RvLWluZm8tYm94ZXMtbmFtZScpXHJcblxyXG4gICAgY29uc3QgbmV3VG9kb0RhdGVEaXYgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdkaXYnKTtcclxuICAgIG5ld1RvZG9EYXRlRGl2LnRleHRDb250ZW50ID0gZGF0ZTtcclxuICAgIG5ld1RvZG9EYXRlRGl2LmNsYXNzTGlzdC5hZGQoJ3RvZG8taW5mby1ib3hlcy1kYXRlJylcclxuXHJcbiAgICBjb25zdCBuZXdUb2RvUHJpb3JpdHlEaXYgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdkaXYnKTtcclxuICAgIG5ld1RvZG9Qcmlvcml0eURpdi50ZXh0Q29udGVudCA9IHByaW9yaXR5O1xyXG4gICAgbmV3VG9kb1ByaW9yaXR5RGl2LmNsYXNzTGlzdC5hZGQoJ3RvZG8taW5mby1ib3hlcy1wcmlvcml0eScpXHJcbiAgICBcclxuICAgIFxyXG4gICAgbmV3VG9kby5hcHBlbmRDaGlsZChuZXdUb2RvTmFtZURpdik7XHJcbiAgICBuZXdUb2RvLmFwcGVuZENoaWxkKG5ld1RvZG9EYXRlRGl2KTtcclxuICAgIG5ld1RvZG8uYXBwZW5kQ2hpbGQobmV3VG9kb1ByaW9yaXR5RGl2KTtcclxuXHJcbiAgICB0b2RvRGl2LmFwcGVuZENoaWxkKG5ld1RvZG8pO1xyXG5cclxuXHJcbiAgICAvLyBhZGQgdG9kbyB0byB0aGUgbG9jYWwgc3RvcmFnZVxyXG4gICAgLy8gc2F2ZUxvY2FsVG9kb3MobmV3dG9kb29iaik7XHJcbiAgICAvLyBDSEVDSyBNQVJLIGJ1dHRvblxyXG5cclxuICAgIC8vcHV0IHRvZG8gaW4gdGhlIGFjdGl2ZSB0YWJcclxuICAgIHNhdmVUb2Rvc2luVGFiKG5ld3RvZG9vYmopO1xyXG5cclxuICAgIGNvbnN0IGNvbXBsZXRlZEJ1dHRvbiA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2J1dHRvbicpO1xyXG4gICAgY29tcGxldGVkQnV0dG9uLnRleHRDb250ZW50ID0gJ+KclO+4jyc7XHJcbiAgICBjb21wbGV0ZWRCdXR0b24uY2xhc3NMaXN0LmFkZCgnY29tcGxldGUtYnRuJyk7XHJcbiAgICB0b2RvRGl2LmFwcGVuZENoaWxkKGNvbXBsZXRlZEJ1dHRvbik7XHJcbiAgICBcclxuICAgIC8vIHRyYXNoIE1BUksgYnV0dG9uXHJcblxyXG4gICAgY29uc3QgdHJhc2hCdXR0b24gPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdidXR0b24nKTtcclxuICAgIHRyYXNoQnV0dG9uLnRleHRDb250ZW50ID0gJ/Cfl5HvuI8nO1xyXG4gICAgdHJhc2hCdXR0b24uY2xhc3NMaXN0LmFkZCgndHJhc2gtYnRuJyk7XHJcbiAgICB0b2RvRGl2LmFwcGVuZENoaWxkKHRyYXNoQnV0dG9uKTtcclxuXHJcbiAgICAvLyBhcHBlbmQgdG8gbGlzdFxyXG4gICAgc2VsZWN0b3JzLnRvZG9MaXN0LmFwcGVuZENoaWxkKHRvZG9EaXYpO1xyXG4gICAgLy8gY2xlYXIgdG9kbyBpbnB1dCB2YWx1ZVxyXG4gICAgc2VsZWN0b3JzLnRvZG9JbnB1dC52YWx1ZSA9ICcnO1xyXG4gICAgc2VsZWN0b3JzLnRvZG9EYXRlSW5wdXQudmFsdWUgPSAnJztcclxufVxyXG5cclxuZnVuY3Rpb24gc2F2ZVRvZG9zaW5UYWIodG9kbykge1xyXG4gICAgcmV0cmlldmVUYWJzRnJvbU1lbW9yeSgpOyBcclxuICAgIGNvbnN0IGFjdGl2ZVRhYiA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy50YWItYWN0aXZlJyk7XHJcbiAgICBjb25zdCB0YWJOYW1lID0gYWN0aXZlVGFiLmNoaWxkTm9kZXNbMF0uaW5uZXJUZXh0O1xyXG4gICAgdGFicy5mb3JFYWNoKHRhYiA9PiB7XHJcbiAgICAgICAgaWYodGFiLm5hbWUgPT0gdGFiTmFtZSkge1xyXG4gICAgICAgICAgICB0YWIudG9kb3MucHVzaCh0b2RvKTtcclxuICAgICAgICAgICAgbG9jYWxTdG9yYWdlLnNldEl0ZW0oJ3RhYnMnLCBKU09OLnN0cmluZ2lmeSh0YWJzKSk7XHJcbiAgICAgICAgfVxyXG4gICAgfSlcclxufVxyXG5cclxuZnVuY3Rpb24gZGVsZXRlQ2hlY2soZXZlbnQpIHtcclxuICAgIGNvbnN0IGl0ZW0gPSBldmVudC50YXJnZXQ7XHJcbiAgICBcclxuICAgIC8vIGRlbGV0ZSB0b2RvXHJcbiAgICBpZihpdGVtLmNsYXNzTGlzdFswXSA9PT0gJ3RyYXNoLWJ0bicpIHtcclxuICAgICAgICBjb25zdCB0b2RvID0gaXRlbS5wYXJlbnRFbGVtZW50O1xyXG4gICAgICAgIC8vIGFuaW1hdGlvblxyXG4gICAgICAgIHRvZG8uY2xhc3NMaXN0LmFkZCgnZmFsbCcpO1xyXG4gICAgICAgIHJlbW92ZUxvY2FsVG9kb3ModG9kbyk7XHJcbiAgICAgICAgdG9kby5hZGRFdmVudExpc3RlbmVyKCd0cmFuc2l0aW9uZW5kJywgKCkgPT4ge1xyXG4gICAgICAgICAgICB0b2RvLnJlbW92ZSgpO1xyXG4gICAgICAgIH0pO1xyXG4gICAgfVxyXG5cclxuICAgIC8vIGNoZWNrIG1hcmtcclxuXHJcbiAgICBpZihpdGVtLmNsYXNzTGlzdFswXSA9PT0gJ2NvbXBsZXRlLWJ0bicpIHtcclxuICAgICAgICBjb25zdCB0b2RvID0gaXRlbS5wYXJlbnRFbGVtZW50O1xyXG4gICAgICAgIHRvZG8uY2xhc3NMaXN0LnRvZ2dsZSgnY29tcGxldGVkJyk7XHJcbiAgICB9XHJcbn1cclxuXHJcbmZ1bmN0aW9uIGZpbHRlclRvZG8oZXZlbnQpIHtcclxuICAgIGNvbnN0IHRvZG9zID0gc2VsZWN0b3JzLnRvZG9MaXN0LmNoaWxkTm9kZXM7XHJcbiAgICB0b2Rvcy5mb3JFYWNoKGZ1bmN0aW9uKHRvZG8pIHtcclxuICAgICAgICBzd2l0Y2goZXZlbnQudGFyZ2V0LnZhbHVlKSB7XHJcbiAgICAgICAgICAgIGNhc2UgJ2FsbCc6XHJcbiAgICAgICAgICAgICAgICB0b2RvLnN0eWxlLmRpc3BsYXkgPSAnZmxleCc7XHJcbiAgICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgICAgY2FzZSAnY29tcGxldGVkJzpcclxuICAgICAgICAgICAgICAgIGlmKHRvZG8uY2xhc3NMaXN0LmNvbnRhaW5zKCdjb21wbGV0ZWQnKSkge1xyXG4gICAgICAgICAgICAgICAgICAgIHRvZG8uc3R5bGUuZGlzcGxheSA9ICdmbGV4JztcclxuICAgICAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICAgICAgdG9kby5zdHlsZS5kaXNwbGF5ID0gJ25vbmUnO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgICAgIGNhc2UgJ3VuY29tcGxldGVkJzpcclxuICAgICAgICAgICAgICAgIGlmKCF0b2RvLmNsYXNzTGlzdC5jb250YWlucygnY29tcGxldGVkJykpe1xyXG4gICAgICAgICAgICAgICAgICAgIHRvZG8uc3R5bGUuZGlzcGxheSA9ICdmbGV4JztcclxuICAgICAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICAgICAgdG9kby5zdHlsZS5kaXNwbGF5ID0gJ25vbmUnO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgfVxyXG4gICAgfSk7XHJcbn1cclxuXHJcbmZ1bmN0aW9uIGdldFRvZG9zKCkge1xyXG4gICAgcmV0cmlldmVUYWJzRnJvbU1lbW9yeSgpO1xyXG4gICAgXHJcbiAgICBsZXQgdGFiTmFtZSA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy50YWItYWN0aXZlJykuY2hpbGRyZW5bMF0uY2hpbGRyZW5bMF0uaW5uZXJUZXh0O1xyXG4gICAgXHJcbiAgICB0YWJzLmZvckVhY2godGFiID0+IHtcclxuICAgICAgICBpZih0YWIubmFtZSA9PSB0YWJOYW1lKSB7XHJcbiAgICAgICAgICAgIHRhYi50b2Rvcy5mb3JFYWNoKHRvZG8gPT4ge1xyXG4gICAgICAgICAgICAgICAgLy8gdG9kbyBESVZcclxuICAgICAgICAgICAgICAgIGNvbnN0IHRvZG9EaXYgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdkaXYnKTtcclxuICAgICAgICAgICAgICAgIHRvZG9EaXYuY2xhc3NMaXN0LmFkZCgndG9kbycpO1xyXG4gICAgICAgICAgICAgICAgLy8gY3JlYXRlIExJXHJcbiAgICAgICAgXHJcbiAgICAgICAgICAgICAgICAvLyB0b2RvIG9iamVjdCBpbnN0YW50aWF0aW9uXHJcbiAgICAgICAgXHJcbiAgICAgICAgICAgICAgICBsZXQgbmFtZSA9IHRvZG8ubmFtZTtcclxuICAgICAgICAgICAgICAgIGxldCBkYXRlID0gdG9kby5kYXRlO1xyXG4gICAgICAgICAgICAgICAgbGV0IHByaW9yaXR5ID0gdG9kby5wcmlvcml0eTsgICAgICAgIFxyXG4gICAgICAgIFxyXG4gICAgICAgICAgICAgICAgY29uc3QgbmV3VG9kbyA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2xpJyk7XHJcbiAgICAgICAgICAgICAgICBuZXdUb2RvLmNsYXNzTGlzdC5hZGQoJ3RvZG8taXRlbScpO1xyXG4gICAgICAgIFxyXG4gICAgICAgICAgICAgICAgY29uc3QgbmV3VG9kb05hbWVEaXYgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdkaXYnKTtcclxuICAgICAgICAgICAgICAgIG5ld1RvZG9OYW1lRGl2LnRleHRDb250ZW50ID0gbmFtZTtcclxuICAgICAgICAgICAgICAgIG5ld1RvZG9OYW1lRGl2LmNsYXNzTGlzdC5hZGQoJ3RvZG8taW5mby1ib3hlcy1uYW1lJylcclxuICAgICAgICBcclxuICAgICAgICAgICAgICAgIGNvbnN0IG5ld1RvZG9EYXRlRGl2ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnZGl2Jyk7XHJcbiAgICAgICAgICAgICAgICBuZXdUb2RvRGF0ZURpdi50ZXh0Q29udGVudCA9IGRhdGU7XHJcbiAgICAgICAgICAgICAgICBuZXdUb2RvRGF0ZURpdi5jbGFzc0xpc3QuYWRkKCd0b2RvLWluZm8tYm94ZXMtZGF0ZScpXHJcbiAgICAgICAgXHJcbiAgICAgICAgICAgICAgICBjb25zdCBuZXdUb2RvUHJpb3JpdHlEaXYgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdkaXYnKTtcclxuICAgICAgICAgICAgICAgIG5ld1RvZG9Qcmlvcml0eURpdi50ZXh0Q29udGVudCA9IHByaW9yaXR5O1xyXG4gICAgICAgICAgICAgICAgbmV3VG9kb1ByaW9yaXR5RGl2LmNsYXNzTGlzdC5hZGQoJ3RvZG8taW5mby1ib3hlcy1wcmlvcml0eScpXHJcbiAgICAgICAgICAgICAgICBcclxuICAgICAgICAgICAgICAgIFxyXG4gICAgICAgICAgICAgICAgbmV3VG9kby5hcHBlbmRDaGlsZChuZXdUb2RvTmFtZURpdik7XHJcbiAgICAgICAgICAgICAgICBuZXdUb2RvLmFwcGVuZENoaWxkKG5ld1RvZG9EYXRlRGl2KTtcclxuICAgICAgICAgICAgICAgIG5ld1RvZG8uYXBwZW5kQ2hpbGQobmV3VG9kb1ByaW9yaXR5RGl2KTtcclxuICAgICAgICBcclxuICAgICAgICAgICAgICAgIHRvZG9EaXYuYXBwZW5kQ2hpbGQobmV3VG9kbyk7XHJcbiAgICAgICAgXHJcbiAgICAgICAgICAgICAgICBjb25zdCBjb21wbGV0ZWRCdXR0b24gPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdidXR0b24nKTtcclxuICAgICAgICAgICAgICAgIGNvbXBsZXRlZEJ1dHRvbi50ZXh0Q29udGVudCA9ICfinJTvuI8nO1xyXG4gICAgICAgICAgICAgICAgY29tcGxldGVkQnV0dG9uLmNsYXNzTGlzdC5hZGQoJ2NvbXBsZXRlLWJ0bicpO1xyXG4gICAgICAgICAgICAgICAgdG9kb0Rpdi5hcHBlbmRDaGlsZChjb21wbGV0ZWRCdXR0b24pO1xyXG4gICAgICAgICAgICAgICAgXHJcbiAgICAgICAgICAgICAgICAvLyB0cmFzaCBNQVJLIGJ1dHRvblxyXG4gICAgICAgIFxyXG4gICAgICAgICAgICAgICAgY29uc3QgdHJhc2hCdXR0b24gPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdidXR0b24nKTtcclxuICAgICAgICAgICAgICAgIHRyYXNoQnV0dG9uLnRleHRDb250ZW50ID0gJ/Cfl5HvuI8nO1xyXG4gICAgICAgICAgICAgICAgdHJhc2hCdXR0b24uY2xhc3NMaXN0LmFkZCgndHJhc2gtYnRuJyk7XHJcbiAgICAgICAgICAgICAgICB0b2RvRGl2LmFwcGVuZENoaWxkKHRyYXNoQnV0dG9uKTtcclxuICAgICAgICBcclxuICAgICAgICAgICAgICAgIC8vIGFwcGVuZCB0byBsaXN0XHJcbiAgICAgICAgICAgICAgICBzZWxlY3RvcnMudG9kb0xpc3QuYXBwZW5kQ2hpbGQodG9kb0Rpdik7XHJcbiAgICAgICAgICAgIH0pXHJcbiAgICAgICAgfVxyXG4gICAgfSlcclxufVxyXG5cclxuZnVuY3Rpb24gcmVtb3ZlTG9jYWxUb2Rvcyh0b2RvKSB7XHJcbiAgICBjb25zdCB0b2RvRm9yVGFiID0gdG9kby5jaGlsZE5vZGVzWzBdLmNoaWxkTm9kZXNbMF0uaW5uZXJUZXh0O1xyXG4gICAgcmV0cmlldmVUYWJzRnJvbU1lbW9yeSgpO1xyXG4gICAgdGFicy5mb3JFYWNoKGl0ZW0gPT4ge1xyXG4gICAgICAgIGl0ZW0udG9kb3MgPSBpdGVtLnRvZG9zLmZpbHRlcihpdGVtID0+IGl0ZW0ubmFtZSAhPSB0b2RvRm9yVGFiKTtcclxuICAgIH0pXHJcbiAgICBsb2NhbFN0b3JhZ2Uuc2V0SXRlbSgndGFicycsIEpTT04uc3RyaW5naWZ5KHRhYnMpKTtcclxuXHJcblxyXG59XHJcblxyXG5mdW5jdGlvbiBjbGVhclRvZG9zKCkge1xyXG4gICAgZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLnRvZG8tbGlzdCcpLmlubmVyVGV4dCA9ICcnO1xyXG59XHJcblxyXG5mdW5jdGlvbiBjcmVhdGVUYWIoZXZlbnQpIHtcclxuICAgIGV2ZW50LnByZXZlbnREZWZhdWx0KCk7ICAgXHJcbiAgICBcclxuICAgIGxldCBuYW1lID0gcHJvbXB0KCdOYW1lIHlvdXIgdGFiIScsICdQb3BzaWNsZScpO1xyXG4gICAgbGV0IHRhYiA9IG5ldyBUYWIobmFtZSk7XHJcblxyXG4gICAgbGV0IG5ld1RhYiA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2xpJyk7XHJcbiAgICBuZXdUYWIuY2xhc3NMaXN0LmFkZCgndGFiJyk7XHJcbiAgICBsZXQgbmV3RGl2ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnZGl2Jyk7XHJcbiAgICBuZXdEaXYuY2xhc3NMaXN0LmFkZCgndGFiLWRpdicpO1xyXG4gICAgbGV0IG5ld1NwYW5EaXYgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdkaXYnKTtcclxuICAgIG5ld1NwYW5EaXYuY2xhc3NMaXN0LmFkZCgnc3Bhbi1kaXYnKTtcclxuICAgIGxldCBuZXdTcGFuID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnc3BhbicpO1xyXG4gICAgbmV3U3Bhbi50ZXh0Q29udGVudCA9IHRhYi5uYW1lO1xyXG5cclxuICAgIGxldCBuZXdUcmFzaGNhbkRpdiA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2RpdicpO1xyXG4gICAgbmV3VHJhc2hjYW5EaXYuY2xhc3NMaXN0LmFkZCgndHJhc2hjYW4tZGl2JylcclxuICAgIGxldCBuZXdUcmFzaEJ1dHRvbiA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2J1dHRvbicpO1xyXG4gICAgbmV3VHJhc2hCdXR0b24uY2xhc3NMaXN0LmFkZCgndHJhc2gtYnRuLXRhYicpO1xyXG4gICAgbmV3VHJhc2hCdXR0b24udGV4dENvbnRlbnQgPSAn8J+Xke+4jyc7XHJcblxyXG4gICAgLy9zYXZlIHRhYiB0byBsb2NhbCBtZW1vcnlcclxuICAgIHNhdmVMb2NhbFRhYih0YWIpO1xyXG4gICAgXHJcbiAgICBuZXdTcGFuRGl2LmFwcGVuZENoaWxkKG5ld1NwYW4pO1xyXG4gICAgbmV3RGl2LmFwcGVuZENoaWxkKG5ld1NwYW5EaXYpO1xyXG4gICAgbmV3VHJhc2hjYW5EaXYuYXBwZW5kQ2hpbGQobmV3VHJhc2hCdXR0b24pO1xyXG4gICAgbmV3VGFiLmFwcGVuZENoaWxkKG5ld0Rpdik7XHJcbiAgICBuZXdUYWIuYXBwZW5kQ2hpbGQobmV3VHJhc2hjYW5EaXYpO1xyXG4gICAgc2VsZWN0b3JzLnRhYkxpc3QuYXBwZW5kQ2hpbGQobmV3VGFiKTsgXHJcbiAgICBcclxuICAgIGxldCBvbmx5VGFiID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLnRhYicpXHJcbiAgICBcclxuICAgIGlmKG9ubHlUYWIucGFyZW50RWxlbWVudC5jaGlsZE5vZGVzLmxlbmd0aCA9PT0gMSkge1xyXG4gICAgICAgIG9ubHlUYWIuY2xhc3NMaXN0LmFkZCgndGFiLWFjdGl2ZScpO1xyXG4gICAgICAgIHJldHVyblxyXG4gICAgfSBcclxuXHJcbn1cclxuXHJcbmZ1bmN0aW9uIGRlbGV0ZVNlbGVjdFRhYihldmVudCkgeyBcclxuICAgIFxyXG4gICAgY29uc3QgaXRlbSA9IGV2ZW50LnRhcmdldDtcclxuICAgIFxyXG4gICAgXHJcbiAgICAvLyBkZWxldGUgdG9kb1xyXG4gICAgaWYoaXRlbS5jbGFzc0xpc3RbMF0gPT09ICd0cmFzaC1idG4tdGFiJyB8fCBpdGVtLmNsYXNzTGlzdFswXSA9PT0gJ3RyYXNoLWJ0bicgKSB7XHJcbiAgICAgICAgY29uc3QgdGFiID0gaXRlbS5wYXJlbnRFbGVtZW50LnBhcmVudEVsZW1lbnQ7XHJcbiAgICAgICAgLy8gZG9lcyBub3QgYWxsb3cgZGVsZXRpb24gd2hlbiBvbmx5IG9uZSB0YWJcclxuICAgICAgICBpZih0YWIucGFyZW50RWxlbWVudC5jaGlsZE5vZGVzLmxlbmd0aCA9PT0gMSkge1xyXG4gICAgICAgICAgICAvLyBpdGVtLmNsYXNzTGlzdC5hZGQoJ3RhYi1hY3RpdmUnKTtcclxuICAgICAgICAgICAgcmV0dXJuXHJcbiAgICAgICAgfSAgIFxyXG4gICAgICAgIC8vIGFuaW1hdGlvblxyXG4gICAgICAgIHRhYi5jbGFzc0xpc3QuYWRkKCdmYWxsJyk7XHJcbiAgICAgICAgcmVtb3ZlTG9jYWxUYWIodGFiKTtcclxuICAgICAgICB0YWIuYWRkRXZlbnRMaXN0ZW5lcigndHJhbnNpdGlvbmVuZCcsICgpID0+IHtcclxuICAgICAgICAgICAgdGFiLnJlbW92ZSgpO1xyXG4gICAgICAgIH0pO1xyXG4gICAgfVxyXG5cclxuICAgIC8vIGNoZWNrIG1hcmtcclxuXHJcbiAgICBpZihpdGVtLmNsYXNzTGlzdFswXSA9PT0gJ3RhYi1kaXYnIHx8IGl0ZW0uY2xhc3NMaXN0WzBdID09PSAndGFiJyB8fCBpdGVtLmNsYXNzTGlzdFswXSA9PT0gJ3NwYW4tZGl2Jykge1xyXG4gICAgICAgIGxldCB0YWIgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKCcudGFiJyk7XHJcbiAgICAgICAgaWYoZXZlbnQudGFyZ2V0LmNsYXNzTGlzdC5jb250YWlucygndGFiJykpIHtcclxuICAgICAgICAgICAgdGFiLmZvckVhY2goaXRlbSA9PiBpdGVtLmNsYXNzTGlzdC5yZW1vdmUoJ3RhYi1hY3RpdmUnKSk7XHJcbiAgICAgICAgICAgIGl0ZW0uY2xhc3NMaXN0LmFkZCgndGFiLWFjdGl2ZScpO1xyXG4gICAgICAgICAgICBjbGVhclRvZG9zKCk7XHJcbiAgICAgICAgICAgIGdldFRvZG9zKCk7XHJcbiAgICAgICAgICAgIFxyXG4gICAgICAgIH1cclxuICAgICAgICBcclxuICAgIH1cclxufVxyXG5cclxuZnVuY3Rpb24gc2F2ZUxvY2FsVGFiKHRhYikge1xyXG4gICAgLy9jaGVjayAtLSBkbyBJIGFscmVhZHkgaGF2ZSB0aGluZ3MgaW4gdGhlcmU/XHJcbiAgICByZXRyaWV2ZVRhYnNGcm9tTWVtb3J5KCk7XHJcbiAgICB0YWJzLnB1c2godGFiKTtcclxuICAgIGxvY2FsU3RvcmFnZS5zZXRJdGVtKCd0YWJzJywgSlNPTi5zdHJpbmdpZnkodGFicykpOyAgIFxyXG59XHJcblxyXG5mdW5jdGlvbiBsb2FkVGFicygpIHtcclxuICAgIHJldHJpZXZlVGFic0Zyb21NZW1vcnkoKTtcclxuICAgIHRhYnMuZm9yRWFjaChmdW5jdGlvbih0YWIpe1xyXG4gICAgICAgIGxldCBuYW1lID0gdGFiLm5hbWU7XHJcbiAgICAgICAgXHJcbiAgICAgICAgbGV0IG5ld1RhYiA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2xpJyk7XHJcbiAgICAgICAgbmV3VGFiLmNsYXNzTGlzdC5hZGQoJ3RhYicpO1xyXG4gICAgICAgIGxldCBuZXdEaXYgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdkaXYnKTtcclxuICAgICAgICBuZXdEaXYuY2xhc3NMaXN0LmFkZCgndGFiLWRpdicpO1xyXG4gICAgICAgIGxldCBuZXdTcGFuRGl2ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnZGl2Jyk7XHJcbiAgICAgICAgbmV3U3BhbkRpdi5jbGFzc0xpc3QuYWRkKCdzcGFuLWRpdicpO1xyXG4gICAgICAgIGxldCBuZXdTcGFuID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnc3BhbicpO1xyXG4gICAgICAgIG5ld1NwYW4udGV4dENvbnRlbnQgPSBuYW1lO1xyXG4gICAgXHJcbiAgICAgICAgbGV0IG5ld1RyYXNoY2FuRGl2ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnZGl2Jyk7XHJcbiAgICAgICAgbmV3VHJhc2hjYW5EaXYuY2xhc3NMaXN0LmFkZCgndHJhc2hjYW4tZGl2JylcclxuICAgICAgICBsZXQgbmV3VHJhc2hCdXR0b24gPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdidXR0b24nKTtcclxuICAgICAgICBuZXdUcmFzaEJ1dHRvbi5jbGFzc0xpc3QuYWRkKCd0cmFzaC1idG4tdGFiJyk7XHJcbiAgICAgICAgbmV3VHJhc2hCdXR0b24udGV4dENvbnRlbnQgPSAn8J+Xke+4jyc7XHJcbiAgICAgICAgXHJcbiAgICAgICAgbmV3U3BhbkRpdi5hcHBlbmRDaGlsZChuZXdTcGFuKTtcclxuICAgICAgICBuZXdEaXYuYXBwZW5kQ2hpbGQobmV3U3BhbkRpdik7XHJcbiAgICAgICAgbmV3VHJhc2hjYW5EaXYuYXBwZW5kQ2hpbGQobmV3VHJhc2hCdXR0b24pO1xyXG4gICAgICAgIG5ld1RhYi5hcHBlbmRDaGlsZChuZXdEaXYpO1xyXG4gICAgICAgIG5ld1RhYi5hcHBlbmRDaGlsZChuZXdUcmFzaGNhbkRpdik7XHJcbiAgICAgICAgc2VsZWN0b3JzLnRhYkxpc3QuYXBwZW5kQ2hpbGQobmV3VGFiKTsgICBcclxuICAgIH0pXHJcbn1cclxuXHJcbmZ1bmN0aW9uIHJlbW92ZUxvY2FsVGFiKHRhYikge1xyXG4gICAgcmV0cmlldmVUYWJzRnJvbU1lbW9yeSgpO1xyXG4gICAgLy8gd2hhdCBJIGNsaWNrIGlzIHRoZSBkaXYsIG5vdyBJIHdhbnQgdGhlIGxpIGFuZCB0aGUgaW5uZXIgdGV4dFxyXG4gICAgLy8gc28gd2UgY2FuIFNQTElDRSBpdFxyXG4gICAgY29uc3QgdGFiSW5kZXggPSB0YWIuY2hpbGRyZW5bMF0uaW5uZXJUZXh0O1xyXG4gICAgdGFicy5zcGxpY2UodGFicy5pbmRleE9mKHRhYkluZGV4KSwgMSk7XHJcbiAgICBsb2NhbFN0b3JhZ2Uuc2V0SXRlbSgndGFicycsIEpTT04uc3RyaW5naWZ5KHRhYnMpKTtcclxuXHJcbn1cclxuXHJcbmZ1bmN0aW9uIGFjdGl2YXRlVGFiKCkge1xyXG4gICAgXHJcbiAgICBpZihzZWxlY3RvcnMudGFiTGlzdC5jaGlsZE5vZGVzWzBdID09PSB1bmRlZmluZWQpIHJldHVybjtcclxuICAgIGVsc2Uge1xyXG4gICAgICAgIHNlbGVjdG9ycy50YWJMaXN0LmNoaWxkTm9kZXNbMF0uY2xhc3NMaXN0LmFkZCgndGFiLWFjdGl2ZScpOyAgICBcclxuICAgICAgICBnZXRUb2RvcygpO1xyXG4gICAgfVxyXG59XHJcblxyXG5mdW5jdGlvbiByZXRyaWV2ZVRhYnNGcm9tTWVtb3J5KCkge1xyXG4gICAgaWYobG9jYWxTdG9yYWdlLmdldEl0ZW0oJ3RhYnMnKSA9PT0gbnVsbCkgdGFicyA9IFtdO1xyXG4gICAgZWxzZSB7XHJcbiAgICAgICAgdGFicyA9IEpTT04ucGFyc2UobG9jYWxTdG9yYWdlLmdldEl0ZW0oJ3RhYnMnKSk7XHJcbiAgICB9XHJcbiAgICByZXR1cm4gdGFicztcclxufVxyXG5cclxuZnVuY3Rpb24gZ2V0VG9kYXlEYXRlKCkge1xyXG4gICAgbGV0IHRvZGF5ID0gbmV3IERhdGUoKTtcclxuICAgIGxldCBkYXkgPSB0b2RheS5nZXREYXRlKCk7XHJcbiAgICBsZXQgbW9udGggPSB0b2RheS5nZXRNb250aCgpICsgMTtcclxuICAgIGlmKG1vbnRoIDwgMTApIHtcclxuICAgICAgICBtb250aCA9IGAwJHttb250aH1gO1xyXG4gICAgfSAgICAgICAgXHJcbiAgICBsZXQgeWVhciA9IHRvZGF5LmdldEZ1bGxZZWFyKCk7XHJcbiAgICBsZXQgdG9kYXlEYXRlID0gKGAke3llYXJ9LSR7bW9udGh9LSR7ZGF5fWApO1xyXG5cclxuICAgIGxldCBkYXRlSW5wdXQgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcudG9kby1kYXRlLWlucHV0Jyk7XHJcbiAgICBkYXRlSW5wdXQuc2V0QXR0cmlidXRlKCdtaW4nLCB0b2RheURhdGUpO1xyXG59XHJcblxyXG5leHBvcnQge2FkZFRvZG8sIHNhdmVUb2Rvc2luVGFiLCBkZWxldGVDaGVjaywgZmlsdGVyVG9kbyxcclxuICAgIGdldFRvZG9zLCByZW1vdmVMb2NhbFRvZG9zLCBjbGVhclRvZG9zLCBjcmVhdGVUYWIsIGRlbGV0ZVNlbGVjdFRhYixcclxuICAgIHNhdmVMb2NhbFRhYiwgbG9hZFRhYnMsIHJlbW92ZUxvY2FsVGFiLCBhY3RpdmF0ZVRhYiwgXHJcbiAgICByZXRyaWV2ZVRhYnNGcm9tTWVtb3J5LCBnZXRUb2RheURhdGV9IiwiaW1wb3J0ICogYXMgdG9kb0xvZ2ljIGZyb20gJy4vdG9kb19mdW5jdGlvbnMnO1xyXG5cclxuZG9jdW1lbnQuYWRkRXZlbnRMaXN0ZW5lcignRE9NQ29udGVudExvYWRlZCcsIHRvZG9Mb2dpYy5sb2FkVGFicyk7XHJcbmRvY3VtZW50LmFkZEV2ZW50TGlzdGVuZXIoJ0RPTUNvbnRlbnRMb2FkZWQnLCB0b2RvTG9naWMuYWN0aXZhdGVUYWIpO1xyXG5kb2N1bWVudC5hZGRFdmVudExpc3RlbmVyKCdET01Db250ZW50TG9hZGVkJywgdG9kb0xvZ2ljLmdldFRvZGF5RGF0ZSk7XHJcbiJdLCJuYW1lcyI6WyJ0b2RvSW5wdXQiLCJkb2N1bWVudCIsInF1ZXJ5U2VsZWN0b3IiLCJ0b2RvRGF0ZUlucHV0IiwidG9kb1ByaW9yaXR5SW5wdXQiLCJ0b2RvQnV0dG9uIiwidG9kb0xpc3QiLCJmaWx0ZXJPcHRpb24iLCJhZGRUYWJCdXR0b24iLCJ0YWJMaXN0IiwidGFiIiwicXVlcnlTZWxlY3RvckFsbCIsIlRhYiIsIm5hbWUiLCJ0aGlzIiwidG9kb3MiLCJUb2RvIiwiZGF0ZSIsInByaW9yaXR5Iiwic3RhdHVzIiwidGFicyIsImdldFRvZG9zIiwicmV0cmlldmVUYWJzRnJvbU1lbW9yeSIsInRhYk5hbWUiLCJjaGlsZHJlbiIsImlubmVyVGV4dCIsImZvckVhY2giLCJ0b2RvIiwidG9kb0RpdiIsImNyZWF0ZUVsZW1lbnQiLCJjbGFzc0xpc3QiLCJhZGQiLCJuZXdUb2RvIiwibmV3VG9kb05hbWVEaXYiLCJ0ZXh0Q29udGVudCIsIm5ld1RvZG9EYXRlRGl2IiwibmV3VG9kb1ByaW9yaXR5RGl2IiwiYXBwZW5kQ2hpbGQiLCJjb21wbGV0ZWRCdXR0b24iLCJ0cmFzaEJ1dHRvbiIsImxvY2FsU3RvcmFnZSIsImdldEl0ZW0iLCJKU09OIiwicGFyc2UiLCJldmVudCIsInByZXZlbnREZWZhdWx0IiwibmV3dG9kb29iaiIsImNoaWxkTm9kZXMiLCJwdXNoIiwic2V0SXRlbSIsInN0cmluZ2lmeSIsInNhdmVUb2Rvc2luVGFiIiwiaXRlbSIsInRhcmdldCIsInBhcmVudEVsZW1lbnQiLCJ0b2RvRm9yVGFiIiwiZmlsdGVyIiwicmVtb3ZlTG9jYWxUb2RvcyIsImFkZEV2ZW50TGlzdGVuZXIiLCJyZW1vdmUiLCJ0b2dnbGUiLCJ2YWx1ZSIsInN0eWxlIiwiZGlzcGxheSIsImNvbnRhaW5zIiwicHJvbXB0IiwibmV3VGFiIiwibmV3RGl2IiwibmV3U3BhbkRpdiIsIm5ld1NwYW4iLCJuZXdUcmFzaGNhbkRpdiIsIm5ld1RyYXNoQnV0dG9uIiwic2F2ZUxvY2FsVGFiIiwib25seVRhYiIsImxlbmd0aCIsInRhYkluZGV4Iiwic3BsaWNlIiwiaW5kZXhPZiIsInJlbW92ZUxvY2FsVGFiIiwidW5kZWZpbmVkIiwidG9kYXkiLCJEYXRlIiwiZGF5IiwiZ2V0RGF0ZSIsIm1vbnRoIiwiZ2V0TW9udGgiLCJ0b2RheURhdGUiLCJnZXRGdWxsWWVhciIsInNldEF0dHJpYnV0ZSJdLCJzb3VyY2VSb290IjoiIn0=